<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahmood Hasan Khan Pathan - Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0e1a; /* Deeper space blue */
            background-image: radial-gradient(circle at top left, rgba(243, 234, 211, 0.05), transparent 30%),
                              radial-gradient(circle at bottom right, rgba(100, 80, 192, 0.1), transparent 30%);
            color: #EAE7DC; /* Light Cream text */
        }
        .section-title {
            color: #ffffff;
        }
        /* Glassmorphism Card Style */
        .card {
            background-color: rgba(31, 41, 55, 0.4); /* Semi-transparent background */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .accent-text {
            color: #F3EAD3; /* Cream accent */
        }
        .tag {
            background-color: rgba(243, 234, 211, 0.1); /* Transparent cream */
            color: #F3EAD3; /* Cream text */
            border: 1px solid rgba(243, 234, 211, 0.3);
        }
        .link-hover {
            transition: color 0.3s ease;
        }
        .link-hover:hover {
            color: #F3EAD3; /* Cream on hover */
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-8px);
            box-shadow: 0 0 25px rgba(243, 234, 211, 0.15), 0 0 10px rgba(243, 234, 211, 0.1); /* Cream glow */
        }
        /* Header Glassmorphism */
        .glass-header {
            background-color: rgba(10, 14, 26, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Scroll Animation */
        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Monogram Logo Style */
        .logo {
            border: 2px solid #F3EAD3;
            color: #F3EAD3;
            font-weight: 700;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
        }
        .logo:hover {
            background-color: #F3EAD3;
            color: #0a0e1a;
        }
        /* AI Assistant Styles */
        .ai-card {
            background-color: rgba(17, 24, 39, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .ai-button {
            background-color: #d97706; /* Amber-600 */
            transition: background-color 0.3s ease;
        }
        .ai-button:hover {
            background-color: #b45309; /* Amber-700 */
        }
        .ai-button:disabled {
            background-color: #4b5563;
            cursor: not-allowed;
        }
        .loading-spinner {
            border-top-color: #F3EAD3;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        /* Modal Styles */
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="fixed top-0 left-0 right-0 z-50 glass-header">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <a href="#" class="logo">HK</a>
                <nav class="hidden md:flex space-x-8">
                    <a href="#about" class="link-hover">About</a>
                    <a href="#skills" class="link-hover">Skills</a>
                    <a href="#projects" class="link-hover">Projects</a>
                    <a href="#ai-assistant" class="link-hover">AI Assistant</a>
                    <a href="#education" class="link-hover">Education</a>
                    <a href="#contact" class="link-hover">Contact</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-white">
                    <i data-lucide="menu"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-gray-900/90 backdrop-blur-sm">
            <a href="#about" class="block py-2 px-6 text-center link-hover">About</a>
            <a href="#skills" class="block py-2 px-6 text-center link-hover">Skills</a>
            <a href="#projects" class="block py-2 px-6 text-center link-hover">Projects</a>
            <a href="#ai-assistant" class="block py-2 px-6 text-center link-hover">AI Assistant</a>
            <a href="#education" class="block py-2 px-6 text-center link-hover">Education</a>
            <a href="#contact" class="block py-2 px-6 text-center link-hover">Contact</a>
        </div>
    </header>

    <main class="container mx-auto px-6 pt-24 md:pt-32">

        <!-- Hero Section -->
        <section id="hero" class="text-center py-20 fade-in-section">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">Mahmood Hasan Khan Pathan</h1>
            <p class="text-xl md:text-2xl accent-text mb-8">Computer Science Student & Aspiring Software Engineer</p>
            <p class="max-w-3xl mx-auto text-lg leading-relaxed mb-10">
                Highly motivated B.Tech student with a strong foundation in Java, OOPs, and Data Structures. Passionate about building robust, efficient, and secure software solutions.
            </p>
            <div class="flex justify-center space-x-4">
                <a href="#contact" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">Get In Touch</a>
                <a href="#projects" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-transform transform hover:scale-105">View My Work</a>
            </div>
        </section>

        <!-- About Me Section -->
        <section id="about" class="py-20 fade-in-section">
             <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-12">About Me</h2>
             <div class="max-w-4xl mx-auto text-lg text-center leading-loose">
                 <p>
                     I am a dedicated Computer Science Engineering student at Jain University, expecting to graduate in June 2026. My core passion lies in problem-solving and leveraging my skills in software development to create impactful applications. Through my academic journey, I've developed a solid understanding of object-oriented programming, data structures, and algorithms. I am particularly interested in mission-critical, high-performance systems and am eager to contribute to the financial technology sector. I thrive in collaborative environments and am always keen to learn and adapt to new technologies.
                 </p>
             </div>
        </section>


        <!-- Skills Section -->
        <section id="skills" class="py-20 fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-12">Technical Skills</h2>
            <div class="max-w-6xl mx-auto grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Skill Category -->
                <div class="card p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-white mb-4">Languages</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Java</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Python</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>JavaScript</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>HTML & CSS</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>SQL</li>
                    </ul>
                </div>
                <!-- Skill Category -->
                <div class="card p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-white mb-4">Backend</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Node.js</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Express.js</li>
                    </ul>
                </div>
                <!-- Skill Category -->
                <div class="card p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-white mb-4">Databases</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>MongoDB</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>SQL</li>
                    </ul>
                </div>
                <!-- Skill Category -->
                <div class="card p-6 rounded-lg">
                    <h3 class="text-xl font-semibold text-white mb-4">Tools & Libraries</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>OpenCV</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>MediaPipe</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Drone Kit</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>ROS</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 mr-2 accent-text"></i>Git</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Core Competencies Section -->
        <section id="competencies" class="py-20 fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-12">Core Competencies</h2>
            <div class="max-w-5xl mx-auto grid grid-cols-2 md:grid-cols-3 gap-8 text-center">
                <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="puzzle" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Problem-Solving</h4>
                </div>
                <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="users" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Team Collaboration</h4>
                </div>
                <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="refresh-cw" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Adaptability</h4>
                </div>
                <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="brain-circuit" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Critical Thinking</h4>
                </div>
                 <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="focus" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Attention to Detail</h4>
                </div>
                 <div class="card p-6 rounded-lg flex flex-col items-center justify-center">
                    <i data-lucide="clipboard-list" class="w-10 h-10 mb-3 accent-text"></i>
                    <h4 class="text-lg font-semibold text-white">Organizational Skills</h4>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="py-20 fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-12">Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

                <!-- Project 1: WebCam Racer -->
                <div class="card rounded-lg overflow-hidden card-hover flex flex-col">
                    <div class="p-6 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-2xl font-bold text-white mb-2">WebCam Racer</h3>
                            <p class="accent-text font-semibold mb-4">AI-Based Gesture Controlled Game</p>
                            <p class="mb-4">
                                A game controlled in real-time by facial gestures, using MediaPipe's Face Mesh API to track facial landmarks for intuitive, hands-free interaction.
                            </p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">HTML</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">CSS</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">JavaScript</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">MediaPipe</span>
                            </div>
                        </div>
                        <div class="mt-auto pt-4 border-t border-gray-700/50">
                            <h4 class="font-semibold text-white mb-2">Key Focus</h4>
                            <p class="text-sm text-gray-400">Real-time performance, achieving ~91% gesture accuracy and low latency for a smooth user experience.</p>
                        </div>
                    </div>
                </div>

                <!-- Project 2: Secure Voting System -->
                <div class="card rounded-lg overflow-hidden card-hover flex flex-col">
                    <div class="p-6 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-2xl font-bold text-white mb-2">Secure Voting System</h3>
                            <p class="accent-text font-semibold mb-4">Face Recognition & Fingerprint Authentication</p>
                            <p class="mb-4">
                                A secure web voting platform verifying users via face recognition (OpenCV) and fingerprint biometrics, ensuring data integrity and single-vote-per-user.
                            </p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">Java</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">OpenCV</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">MongoDB</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">HTML/CSS</span>
                            </div>
                        </div>
                        <div class="mt-auto pt-4 border-t border-gray-700/50">
                            <h4 class="font-semibold text-white mb-2">Key Focus</h4>
                            <p class="text-sm text-gray-400">Security and data integrity through multi-factor biometric authentication and secure backend logic.</p>
                        </div>
                    </div>
                </div>

                <!-- Project 3: Autonomous Drones -->
                <div class="card rounded-lg overflow-hidden card-hover flex flex-col">
                    <div class="p-6 flex flex-col flex-grow">
                        <div class="flex-grow">
                            <h3 class="text-2xl font-bold text-white mb-2">Autonomous Drones</h3>
                            <p class="accent-text font-semibold mb-4">Analysis and Design</p>
                            <p class="mb-4">
                                Designed and simulated an autonomous drone system using LiDAR and GPS, implementing A* and RRT algorithms for intelligent path planning in ROS.
                            </p>
                             <div class="flex flex-wrap gap-2 mb-4">
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">Python</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">ROS</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">Drone Kit</span>
                                <span class="tag text-xs font-semibold py-1 px-2 uppercase rounded-full">LiDAR</span>
                            </div>
                        </div>
                        <div class="mt-auto pt-4 border-t border-gray-700/50">
                            <h4 class="font-semibold text-white mb-2">Key Focus</h4>
                            <p class="text-sm text-gray-400">Application of advanced pathfinding algorithms and sensor fusion for real-world navigation challenges.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Assistant Section -->
        <section id="ai-assistant" class="py-20 fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-4">AI-Powered Career Assistant</h2>
            <p class="max-w-3xl mx-auto text-lg text-center leading-relaxed mb-12">
                Let AI help you. These tools use the Gemini API to generate content based on my profile.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- AI Cover Letter Generator -->
                <div class="card ai-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-white mb-4">✨ AI Cover Letter Generator</h3>
                    <p class="mb-4 text-gray-400">Paste a job description below. The AI will analyze my skills and projects to generate a tailored cover letter draft.</p>
                    <textarea id="job-description" class="w-full h-32 p-2 rounded-md bg-gray-800 border border-gray-600 focus:ring-amber-500 focus:border-amber-500 text-gray-300" placeholder="Paste job description here..."></textarea>
                    <button id="generate-letter-btn" class="ai-button w-full mt-4 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center">
                        <span class="btn-text">Generate Cover Letter</span>
                        <div class="loading-spinner w-5 h-5 border-2 border-gray-500 rounded-full ml-3 hidden"></div>
                    </button>
                </div>

                <!-- AI Project Recommender -->
                <div class="card ai-card rounded-lg p-6">
                    <h3 class="text-2xl font-bold text-white mb-4">✨ AI Project Recommender</h3>
                    <p class="mb-4 text-gray-400">Click the button to get three new project ideas based on my current skills, designed to expand my expertise.</p>
                    <div id="project-ideas-output" class="mt-4 text-gray-300"></div>
                     <button id="generate-ideas-btn" class="ai-button w-full mt-4 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center">
                        <span class="btn-text">Suggest Project Ideas</span>
                        <div class="loading-spinner w-5 h-5 border-2 border-gray-500 rounded-full ml-3 hidden"></div>
                    </button>
                </div>
            </div>
        </section>

        <!-- Education Section -->
        <section id="education" class="py-20 fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold text-center section-title mb-12">Education</h2>
            <div class="max-w-2xl mx-auto card rounded-lg p-8 text-center">
                <h3 class="text-2xl font-bold text-white">Jain University, Bengaluru</h3>
                <p class="accent-text text-lg my-2">B.Tech in Computer Engineering</p>
                <p class="text-gray-400">Expected Graduation: June 2026</p>
                <p class="text-gray-400">CGPA: 7.5</p>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-20 text-center fade-in-section">
            <h2 class="text-3xl md:text-4xl font-bold section-title mb-4">Get In Touch</h2>
            <p class="max-w-2xl mx-auto text-lg mb-8">
                I'm currently seeking new opportunities and would love to hear from you. Whether you have a question or just want to connect, feel free to reach out.
            </p>
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8">
                <a href="mailto:22btris039@jainuniversity.ac.in" class="link-hover text-lg flex items-center">
                    <i data-lucide="mail" class="w-6 h-6 mr-2"></i>
                    22btris039@jainuniversity.ac.in
                </a>
                <a href="tel:+917396000511" class="link-hover text-lg flex items-center">
                    <i data-lucide="phone" class="w-6 h-6 mr-2"></i>
                    +91 73960 00511
                </a>
                <a href="https://linkedin.com/in/hasan-khan" target="_blank" rel="noopener noreferrer" class="link-hover text-lg flex items-center">
                    <i data-lucide="linkedin" class="w-6 h-6 mr-2"></i>
                    LinkedIn
                </a>
            </div>
        </section>

    </main>
    
    <!-- Modal for AI Generated Content -->
    <div id="ai-modal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop fixed inset-0"></div>
        <div class="card ai-card rounded-lg p-8 m-4 max-w-3xl w-full relative max-h-[80vh] overflow-y-auto">
            <h3 id="modal-title" class="text-2xl font-bold text-white mb-4"></h3>
            <div id="modal-content" class="text-gray-300 leading-relaxed whitespace-pre-wrap"></div>
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
        </div>
    </div>

    <script>
        // Lucide Icons
        lucide.createIcons();

        // Mobile Menu Toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // Scroll Animation
        const sections = document.querySelectorAll('.fade-in-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); 
                }
            });
        }, {
            threshold: 0.1
        });

        sections.forEach(section => {
            observer.observe(section);
        });

        // --- AI Assistant Logic ---
        const generateLetterBtn = document.getElementById('generate-letter-btn');
        const generateIdeasBtn = document.getElementById('generate-ideas-btn');
        const jobDescriptionInput = document.getElementById('job-description');
        const projectIdeasOutput = document.getElementById('project-ideas-output');
        
        // Modal elements
        const aiModal = document.getElementById('ai-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        // --- Candidate Profile Data (Extracted from the page for the AI) ---
        const candidateProfile = {
            name: "Mahmood Hasan Khan Pathan",
            summary: "Highly motivated B.Tech Computer Science Engineering student with a strong foundation in Java, HTML, Object-Oriented Programming (OOPs) concepts, and Data Structures. Eager to apply problem-solving abilities and hands-on experience in building robust, efficient, and secure software solutions. Seeking to contribute to mission-critical, high-performance systems within a dynamic financial technology environment.",
            skills: ["Java", "Python", "JavaScript", "HTML", "CSS", "SQL", "Node.js", "Express.js", "MongoDB", "OpenCV", "MediaPipe", "Drone Kit", "ROS", "Git"],
            projects: [
                {
                    title: "WebCam Racer",
                    description: "An AI-Based Gesture Controlled Game controlled in real-time by facial gestures, using MediaPipe's Face Mesh API to track facial landmarks for intuitive, hands-free interaction.",
                    focus: "Real-time performance, achieving ~91% gesture accuracy and low latency for a smooth user experience."
                },
                {
                    title: "Secure Voting System",
                    description: "A secure web voting platform verifying users via face recognition (OpenCV) and fingerprint biometrics, ensuring data integrity and single-vote-per-user.",
                    focus: "Security and data integrity through multi-factor biometric authentication and secure backend logic."
                },
                {
                    title: "Autonomous Drones",
                    description: "Designed and simulated an autonomous drone system using LiDAR and GPS, implementing A* and RRT algorithms for intelligent path planning in ROS.",
                    focus: "Application of advanced pathfinding algorithms and sensor fusion for real-world navigation challenges."
                }
            ]
        };

        // --- Gemini API Call Function ---
        async function callGemini(prompt, button) {
            const btnText = button.querySelector('.btn-text');
            const spinner = button.querySelector('.loading-spinner');
            
            btnText.classList.add('hidden');
            spinner.classList.remove('hidden');
            button.disabled = true;

            const apiKey = ""; // API key will be injected by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API error: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    console.error("Unexpected API response structure:", result);
                    return "Error: Could not generate content due to an unexpected API response.";
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                return `Error: Could not generate content. ${error.message}`;
            } finally {
                btnText.classList.remove('hidden');
                spinner.classList.add('hidden');
                button.disabled = false;
            }
        }

        // --- Event Listeners ---
        generateLetterBtn.addEventListener('click', async () => {
            const jobDesc = jobDescriptionInput.value.trim();
            if (!jobDesc) {
                showModal("Error", "Please paste a job description first.");
                return;
            }

            const prompt = `
                My name is ${candidateProfile.name}.
                Here is my professional summary: ${candidateProfile.summary}
                Here are my key skills: ${candidateProfile.skills.join(', ')}.
                Here are my projects: ${candidateProfile.projects.map(p => `${p.title} (${p.focus})`).join('; ')}.

                Based on my profile, please write a professional and enthusiastic cover letter for the following job description. Make sure to connect my specific skills and project experiences to the requirements listed in the job description. Keep it concise and impactful.

                Job Description:
                ---
                ${jobDesc}
                ---
            `;

            const generatedText = await callGemini(prompt, generateLetterBtn);
            showModal("Generated Cover Letter", generatedText);
        });

        generateIdeasBtn.addEventListener('click', async () => {
            const prompt = `
                I am a computer science student with the following skills: ${candidateProfile.skills.join(', ')}.
                I have completed these projects: 
                1. ${candidateProfile.projects[0].title}: ${candidateProfile.projects[0].description} (Focus: ${candidateProfile.projects[0].focus})
                2. ${candidateProfile.projects[1].title}: ${candidateProfile.projects[1].description} (Focus: ${candidateProfile.projects[1].focus})
                3. ${candidateProfile.projects[2].title}: ${candidateProfile.projects[2].description} (Focus: ${candidateProfile.projects[2].focus})

                Based on my profile, suggest three new, innovative, and impressive project ideas that I could build to further enhance my portfolio and attract potential employers. For each idea, provide a title, a brief description, and list the key technologies I would use.
            `;
            const generatedText = await callGemini(prompt, generateIdeasBtn);
            showModal("Project Recommendations", generatedText);
        });
        
        // --- Modal Logic ---
        function showModal(title, content) {
            modalTitle.textContent = title;
            modalContent.textContent = content;
            aiModal.classList.remove('hidden');
            aiModal.classList.add('flex');
            lucide.createIcons(); // Re-render icons if any in modal
        }

        function hideModal() {
            aiModal.classList.add('hidden');
            aiModal.classList.remove('flex');
        }

        modalCloseBtn.addEventListener('click', hideModal);
        aiModal.addEventListener('click', (e) => {
            if (e.target.id === 'ai-modal') {
                hideModal();
            }
        });

    </script>
</body>
</html>
